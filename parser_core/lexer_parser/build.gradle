
apply plugin: 'java'

// ../javalibs/*jar -- deps
// ../grammars/*g4 - grammars

def antlrJar = '../../javalibs/antlr-4.4-complete.jar'


repositories {
    flatDir {
        dirs '../../javalibs'
    }
}

dependencies {
    // compile name:'antlr-4.4-complete'
    compile files(antlrJar)
}


task genParser(type: JavaExec) {
    // generate using antlr'

    def genout = "src/main/java/org/miod/parser/generated/"
    def lexer = file("grammars/MiodLexer.g4")
    def parser = file("grammars/MiodParser.g4")

    classpath antlrJar
    main 'org.antlr.v4.Tool'
    args "-package", "org.miod.parser.generated", "-o", "$genout", "$lexer", "$parser"
}


unit sketches.miod_c_r4

type
    @_cattr{header: "mycallbacks.h", source:"mycallbacks.c"}
    UserData = opaque

    @_cattr
    MyCb = proc(u: UserData)

    MyCls = class
        var field: int

    end

extern proc SetCb(c: MyCb)

int myCcb(user: UserData), extern
    var a = cast<MyCls>(user)
    a.field += 1
end

proc main()
    SetCb(myCcb)
end

